<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Eliminar Producto</title>
    <style>
        .overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center}
        .modal{background:#fff;max-width:420px;width:92%;padding:20px;border-radius:8px;box-shadow:0 10px 30px rgba(0,0,0,.2)}
        .modal h2{margin:0 0 10px}
        .modal p{margin:6px 0}
        .actions{margin-top:16px;display:flex;gap:8px;justify-content:flex-end}
        .btn{padding:8px 12px;border:0;border-radius:6px;cursor:pointer}
        .btn-danger{background:#d32f2f;color:#fff}
        .btn-secondary{background:#e0e0e0}
        .resume{background:#fafafa;border:1px solid #eee;border-radius:6px;padding:10px;margin-top:8px}
    </style>
</head>
<body>
    <div class="overlay" id="confirm-overlay">
        <div class="modal">
            <h2>Confirmar eliminación</h2>
            <p>¿Seguro que deseas eliminar este producto?</p>
            <div class="resume">
                <p><strong>Nombre:</strong> {{ producto.nombre }}</p>
                <p><strong>Código:</strong> {{ producto.codigo }}</p>
            </div>
            <div class="actions">
                <button class="btn btn-secondary" id="cancelar">Cancelar</button>
                <button class="btn btn-danger" id="confirmar">Eliminar</button>
            </div>
            <form id="form-delete" method="post" style="display:none;">
                {% csrf_token %}
            </form>
        </div>
    </div>

    <script>
        const cancelar = document.getElementById('cancelar');
        const confirmar = document.getElementById('confirmar');
        const overlay = document.getElementById('confirm-overlay');
        const form = document.getElementById('form-delete');

        cancelar.addEventListener('click', () => {
            window.location.href = "{% url 'lista_productos' %}";
        });

        confirmar.addEventListener('click', () => {
            form.submit();
        });

        // Mostrar el modal inmediatamente al cargar
        overlay.style.display = 'flex';
    </script>
</body>
</html>