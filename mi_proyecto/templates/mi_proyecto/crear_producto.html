{% extends "base.html" %}
{% block title %}Crear Producto{% endblock %}
{% block content %}
    <div class="header">
        <h1>Crear Producto</h1>
        <a href="{% url 'lista_productos' %}">Volver</a>
    </div>

    {% if messages %}
        <ul>
            {% for m in messages %}
                <li>{{ m }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    {% if modo_multiple %}
        <h2>Creación múltiple</h2>
        <form method="post">
            {% csrf_token %}
            {{ formset.management_form }}
            {% for f in formset %}
                <fieldset style="margin-bottom:12px;border:1px solid #ccc;padding:8px;">
                    <h3>Producto {{ forloop.counter }}</h3>
                    <p><label>Nombre:</label> {{ f.nombre }}</p>
                    <p><label>Código:</label> {{ f.codigo }}</p>
                    <p><label>Descripción:</label> {{ f.descripcion }}</p>
                    <p><label>Precio:</label> {{ f.precio }}</p>
                    <p><label>Stock:</label> {{ f.stock }}</p>
                    <p><label>Categoría:</label> {{ f.categoria }}</p>
                    <p><label>Proveedor:</label> {{ f.proveedor }}</p>
                </fieldset>
            {% endfor %}
            <button type="submit" name="guardar_multiple">Guardar todos</button>
        </form>
        <p><a href="{% url 'crear_producto' %}">Volver a creación simple</a></p>
    {% else %}
        <h2>Creación simple</h2>
        <form method="post">
            {% csrf_token %}
            <p><label>Nombre:</label> {{ form.nombre }}</p>
            <p><label>Código:</label> {{ form.codigo }}</p>
            <p><label>Descripción:</label> {{ form.descripcion }}</p>
            <p><label>Precio:</label> {{ form.precio }}</p>
            <p><label>Stock:</label> {{ form.stock }}</p>
            <p><label>Categoría:</label> {{ form.categoria }}</p>
            <p><label>Proveedor:</label> {{ form.proveedor }}</p>
            <button type="submit">Crear producto</button>
        </form>

        <h2>Creación múltiple</h2>
        <form method="post">
            {% csrf_token %}
            <p><label>¿Cuántos productos quieres crear?</label></p>
            <input type="number" name="cantidad" min="1" max="10" required>
            <button type="submit" name="crear_multiple">Generar formularios</button>
        </form>
    {% endif %}
{% endblock %}